<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Изучаем CSS - Интерактивная игра</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .game-area {
            display: flex;
            flex-wrap: wrap;
            padding: 20px;
            gap: 20px;
        }

        .panel {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .panel h2 {
            color: #4b6cb7;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .task {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .task h3 {
            color: #4b6cb7;
            margin-bottom: 10px;
        }

        .code-editor {
            background-color: #2d2d2d;
            color: #f8f8f2;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            min-height: 200px;
            margin-bottom: 15px;
            overflow: auto;
        }

        .code-input {
            width: 100%;
            height: 150px;
            background-color: #2d2d2d;
            color: #f8f8f2;
            border: none;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            resize: vertical;
        }

        .button {
            background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            display: block;
            width: 100%;
            margin-top: 10px;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .button:active {
            transform: translateY(0);
        }

        .result {
            border: 2px dashed #4b6cb7;
            min-height: 200px;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            background-color: #f9f9f9;
        }

        .hint {
            background-color: #fff9e6;
            border-left: 4px solid #ffc107;
            padding: 10px 15px;
            margin-top: 15px;
            border-radius: 0 8px 8px 0;
        }

        .progress {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            background-color: #f0f0f0;
            border-radius: 20px;
            padding: 5px;
        }

        .progress-step {
            flex: 1;
            text-align: center;
            padding: 10px;
            border-radius: 15px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .progress-step.active {
            background-color: #4b6cb7;
            color: white;
        }

        .feedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            display: none;
        }

        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .element {
            margin: 10px 0;
            padding: 10px;
            background-color: #e9ecef;
            border-radius: 5px;
        }

        @media (max-width: 768px) {
            .game-area {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Изучаем CSS</h1>
            <p class="subtitle">Интерактивная игра для изучения каскадных таблиц стилей</p>
        </header>

        <div class="progress">
            <div class="progress-step active">1. Селекторы</div>
            <div class="progress-step">2. Цвета и фон</div>
            <div class="progress-step">3. Текст и шрифты</div>
            <div class="progress-step">4. Блоки и отступы</div>
            <div class="progress-step">5. Позиционирование</div>
        </div>

        <div class="game-area">
            <div class="panel">
                <h2>Задание</h2>
                <div class="task">
                    <h3>Уровень 1: Основы селекторов</h3>
                    <p>Измените внешний вид элементов ниже с помощью CSS.</p>
                    <div class="hint">
                        <strong>Подсказка:</strong> Используйте селекторы по тегам (div, p, h1) и классам (.special).
                    </div>
                </div>

                <h2>Редактор CSS</h2>
                <div class="code-editor">
                    /* Напишите ваш CSS код здесь */<br>
                    <br>
                    div {<br>
                    &nbsp;&nbsp;/* Стили для всех div элементов */<br>
                    }<br>
                    <br>
                    .special {<br>
                    &nbsp;&nbsp;/* Стили для элементов с классом special */<br>
                    }<br>
                </div>
                <textarea class="code-input" placeholder="Введите ваш CSS код..."></textarea>
                <button class="button" id="applyBtn">Применить стили</button>
                <button class="button" id="nextBtn" style="display: none;">Следующий уровень</button>
                
                <div class="feedback success" id="successMsg">
                    Отлично! Вы правильно применили стили!
                </div>
                <div class="feedback error" id="errorMsg">
                    Попробуйте еще раз. Не все стили применены правильно.
                </div>
            </div>

            <div class="panel">
                <h2>Результат</h2>
                <div class="result" id="resultArea">
                    <h1>Заголовок страницы</h1>
                    <div class="element">Обычный блок</div>
                    <div class="element special">Особый блок</div>
                    <div class="element">Еще один обычный блок</div>
                    <p>Это параграф текста. Он должен выглядеть иначе, чем блоки.</p>
                    <div class="element special">Еще один особый блок</div>
                </div>

                <div class="hint">
                    <strong>Цель:</strong> Сделайте все блоки с классом .special красными, а обычные блоки - синими.
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const codeInput = document.querySelector('.code-input');
            const applyBtn = document.getElementById('applyBtn');
            const nextBtn = document.getElementById('nextBtn');
            const resultArea = document.getElementById('resultArea');
            const successMsg = document.getElementById('successMsg');
            const errorMsg = document.getElementById('errorMsg');
            const progressSteps = document.querySelectorAll('.progress-step');
            
            let currentLevel = 1;
            
            // Начальные стили для уровня 1
            const initialStyles = `
                div {
                    padding: 10px;
                    margin: 5px;
                    border: 1px solid #ccc;
                }
                
                .special {
                    background-color: #ffebee;
                }
            `;
            
            // Применяем начальные стили
            applyStyles(initialStyles);
            
            applyBtn.addEventListener('click', function() {
                const userCSS = codeInput.value;
                applyStyles(userCSS);
                checkLevelCompletion();
            });
            
            nextBtn.addEventListener('click', function() {
                if (currentLevel < 5) {
                    currentLevel++;
                    updateLevel();
                } else {
                    alert('Поздравляем! Вы завершили все уровни игры!');
                }
            });
            
            function applyStyles(css) {
                // Удаляем предыдущие стили
                const oldStyle = document.getElementById('dynamicStyles');
                if (oldStyle) {
                    oldStyle.remove();
                }
                
                // Создаем новый элемент стилей
                const styleElement = document.createElement('style');
                styleElement.id = 'dynamicStyles';
                styleElement.textContent = css;
                document.head.appendChild(styleElement);
            }
            
            function checkLevelCompletion() {
                let isCompleted = false;
                
                switch(currentLevel) {
                    case 1:
                        // Проверяем, применены ли правильные стили для уровня 1
                        const specialDivs = document.querySelectorAll('.special');
                        const regularDivs = document.querySelectorAll('div:not(.special)');
                        
                        let allSpecialRed = true;
                        let allRegularBlue = true;
                        
                        // Простая проверка - в реальной игре нужно более сложное решение
                        const userCSS = codeInput.value.toLowerCase();
                        
                        if (userCSS.includes('.special') && 
                            (userCSS.includes('background-color: red') || 
                             userCSS.includes('background: red') ||
                             userCSS.includes('color: red'))) {
                            allSpecialRed = true;
                        }
                        
                        if (userCSS.includes('div') && 
                            (userCSS.includes('background-color: blue') || 
                             userCSS.includes('background: blue') ||
                             userCSS.includes('color: blue'))) {
                            allRegularBlue = true;
                        }
                        
                        isCompleted = allSpecialRed && allRegularBlue;
                        break;
                        
                    // Другие уровни можно добавить здесь
                }
                
                if (isCompleted) {
                    successMsg.style.display = 'block';
                    errorMsg.style.display = 'none';
                    nextBtn.style.display = 'block';
                    applyBtn.style.display = 'none';
                } else {
                    errorMsg.style.display = 'block';
                    successMsg.style.display = 'none';
                }
            }
            
            function updateLevel() {
                // Обновляем прогресс
                progressSteps.forEach((step, index) => {
                    if (index + 1 === currentLevel) {
                        step.classList.add('active');
                    } else {
                        step.classList.remove('active');
                    }
                });
                
                // Обновляем задание
                const taskElement = document.querySelector('.task h3');
                const taskDescription = document.querySelector('.task p');
                const hintElement = document.querySelector('.hint');
                
                switch(currentLevel) {
                    case 1:
                        taskElement.textContent = 'Уровень 1: Основы селекторов';
                        taskDescription.textContent = 'Измените внешний вид элементов ниже с помощью CSS.';
                        hintElement.innerHTML = '<strong>Подсказка:</strong> Используйте селекторы по тегам (div, p, h1) и классам (.special).';
                        break;
                    case 2:
                        taskElement.textContent = 'Уровень 2: Цвета и фон';
                        taskDescription.textContent = 'Измените цвета и фоны элементов.';
                        hintElement.innerHTML = '<strong>Подсказка:</strong> Используйте свойства background-color, color, background-image.';
                        break;
                    case 3:
                        taskElement.textContent = 'Уровень 3: Текст и шрифты';
                        taskDescription.textContent = 'Измените стиль текста и шрифты.';
                        hintElement.innerHTML = '<strong>Подсказка:</strong> Используйте свойства font-family, font-size, text-align, font-weight.';
                        break;
                    case 4:
                        taskElement.textContent = 'Уровень 4: Блоки и отступы';
                        taskDescription.textContent = 'Работа с блочной моделью: отступы, границы, поля.';
                        hintElement.innerHTML = '<strong>Подсказка:</strong> Используйте свойства margin, padding, border, width, height.';
                        break;
                    case 5:
                        taskElement.textContent = 'Уровень 5: Позиционирование';
                        taskDescription.textContent = 'Измените расположение элементов на странице.';
                        hintElement.innerHTML = '<strong>Подсказка:</strong> Используйте свойства position, top, left, display, float.';
                        break;
                }
                
                // Сбрасываем состояние
                codeInput.value = '';
                successMsg.style.display = 'none';
                errorMsg.style.display = 'none';
                nextBtn.style.display = 'none';
                applyBtn.style.display = 'block';
                
                // Применяем начальные стили для нового уровня
                applyStyles(initialStyles);
            }
        });
    </script>
</body>
</html>
